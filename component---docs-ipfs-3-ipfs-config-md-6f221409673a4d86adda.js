(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{l0d0:function(n,e,t){"use strict";t.r(e),t.d(e,"_frontmatter",(function(){return s})),t.d(e,"default",(function(){return l}));t("5hJT"),t("W1QL"),t("K/PF"),t("t91x"),t("75LO"),t("PJhk"),t("mXGw");var i=t("/FXl"),p=t("TjRS");t("aD51");function a(){return(a=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}var s={};void 0!==s&&s&&s===Object(s)&&Object.isExtensible(s)&&!s.hasOwnProperty("__filemeta")&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"docs/ipfs/3/ipfs-config.md"}});var c={_frontmatter:s},o=p.a;function l(n){var e=n.components,t=function(n,e){if(null==n)return{};var t,i,p={},a=Object.keys(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)>=0||(p[t]=n[t]);return p}(n,["components"]);return Object(i.b)(o,a({},c,t,{components:e,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"ipfs配置"},"IPFS配置"),Object(i.b)("h2",{id:"ipfs-下载"},"IPFS 下载"),Object(i.b)("p",null,"下载地址：",Object(i.b)("a",a({parentName:"p"},{href:"https://dist.ipfs.io/#go-ipfs"}),"https://dist.ipfs.io/#go-ipfs")),Object(i.b)("p",null,"本篇博客下载并使用的版本是：",Object(i.b)("strong",{parentName:"p"},"go-ipfs Version v0.4.13 for OS X 64bit")),Object(i.b)("h2",{id:"ipfs-安装"},"IPFS 安装"),Object(i.b)("p",null,Object(i.b)("img",{alt:"ipfs_install",src:"http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs_install1.png"})),Object(i.b)("pre",null,Object(i.b)("code",a({parentName:"pre"},{}),"ipfs --help  //打开命令行，输入，出现Log信息时，表示安装成功\n")),Object(i.b)("h2",{id:"ipfs本地部署"},"IPFS本地部署"),Object(i.b)("h3",{id:"创建节点"},"创建节点"),Object(i.b)("p",null,"在本地全局目录下新建仓库："),Object(i.b)("p",null,Object(i.b)("img",{alt:"ipfs_init",src:"http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs_init.png"})),Object(i.b)("h3",{id:"节点配置"},"节点配置"),Object(i.b)("pre",null,Object(i.b)("code",a({parentName:"pre"},{}),"cd ~/.ipfs\nexport EDITOR=/usr/bin/vim\nipfs config edit\n")),Object(i.b)("p",null,"执行完",Object(i.b)("inlineCode",{parentName:"p"},"ipfs config edit"),"后会打开一个ipfs节点配置文件，可以如下修改配置参数"),Object(i.b)("pre",null,Object(i.b)("code",a({parentName:"pre"},{className:"language-json"}),'{\n    "Identity":{\n        "PeerID":"QmXXXXXXXXXXXXXXX",\n        "PrivKey":"XXXXXXXXXXXX"\n    },\n    "Datastore":{\n        "StorageMax":"10GB",\n        "StorageGCWatermark":90,\n        "GCPeriod":"1h",\n        "Spec":{\n            "mounts":[\n                {\n                    "child":{\n                        "path":"blocks",\n                        "shardFunc":"/repo/flatfs/shard/v1/next-to-last/2",\n                        "sync":true,\n                        "type":"flatfs"\n                    },\n                    "mountpoint":"/blocks",\n                    "prefix":"flatfs.datastore",\n                    "type":"measure"\n                },\n                {\n                    "child":{\n                        "compression":"none",\n                        "path":"datastore",\n                        "type":"levelds"\n                    },\n                    "mountpoint":"/",\n                    "prefix":"leveldb.datastore",\n                    "type":"measure"\n                }\n            ],\n            "type":"mount"\n        },\n        "HashOnRead":false,\n        "BloomFilterSize":0\n    },\n    "Addresses":{\n        "Swarm":[\n            "/ip4/0.0.0.0/tcp/4001",\n            "/ip6/::/tcp/4001"\n        ],\n        "Announce":[\n\n        ],\n        "NoAnnounce":[\n\n        ],\n        "API":"/ip4/127.0.0.1/tcp/5001",\n        "Gateway":"/ip4/127.0.0.1/tcp/8080"\n    },\n    "Mounts":{\n        "IPFS":"/ipfs",\n        "IPNS":"/ipns",\n        "FuseAllowOther":false\n    },\n    "Discovery":{\n        "MDNS":{\n            "Enabled":true,\n            "Interval":10\n        }\n    },\n    "Ipns":{\n        "RepublishPeriod":"",\n        "RecordLifetime":"",\n        "ResolveCacheSize":128\n    },\n    "Bootstrap":[\n        "/dnsaddr/bootstrap.libp2p.io/ipfs/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN",\n        "/dnsaddr/bootstrap.libp2p.io/ipfs/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa",\n        "/dnsaddr/bootstrap.libp2p.io/ipfs/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb",\n        "/dnsaddr/bootstrap.libp2p.io/ipfs/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt",\n        "/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ",\n        "/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM",\n        "/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu",\n        "/ip4/104.236.76.40/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64",\n        "/ip4/178.62.158.247/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd",\n        "/ip6/2604:a880:1:20::203:d001/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM",\n        "/ip6/2400:6180:0:d0::151:6001/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu",\n        "/ip6/2604:a880:800:10::4a:5001/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64",\n        "/ip6/2a03:b0c0:0:1010::23:1001/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd"\n    ],\n    "Gateway":{\n        "HTTPHeaders":{\n            "Access-Control-Allow-Headers":[\n                "X-Requested-With",\n                "Range"\n            ],\n            "Access-Control-Allow-Methods":[\n                "GET"\n            ],\n            "Access-Control-Allow-Origin":[\n                "*"\n            ]\n        },\n        "RootRedirect":"",\n        "Writable":false,\n        "PathPrefixes":[\n\n        ]\n    },\n    "API":{\n        "HTTPHeaders":null\n    },\n    "Swarm":{\n        "AddrFilters":null,\n        "DisableBandwidthMetrics":false,\n        "DisableNatPortMap":false,\n        "DisableRelay":false,\n        "EnableRelayHop":false,\n        "ConnMgr":{\n            "Type":"basic",\n            "LowWater":600,\n            "HighWater":900,\n            "GracePeriod":"20s"\n        }\n    },\n    "Reprovider":{\n        "Interval":"12h",\n        "Strategy":"all"\n    },\n    "Experimental":{\n        "FilestoreEnabled":false,\n        "ShardingEnabled":false,\n        "Libp2pStreamMounting":false\n    }\n}\n')),Object(i.b)("h3",{id:"节点id"},"节点ID"),Object(i.b)("p",null,"每个节点都会存在一个唯一标识，查看节点ID方式如下："),Object(i.b)("pre",null,Object(i.b)("code",a({parentName:"pre"},{}),"\nipfs id\n")),Object(i.b)("h3",{id:"启动节点服务器"},"启动节点服务器"),Object(i.b)("pre",null,Object(i.b)("code",a({parentName:"pre"},{}),"ipfs daemon\n")),Object(i.b)("p",null,Object(i.b)("img",{alt:"ipfs-daemon-error",src:"http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-daemon-error.png"})),Object(i.b)("p",null,"出现了5001端口被占用的情况，这边可以通过对",Object(i.b)("strong",{parentName:"p"},"节点配置文件的修改"),"来解决，如下所示："),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"找到所有配置5001端口的地方"),Object(i.b)("li",{parentName:"ul"},"替换成5002端口")),Object(i.b)("p",null,Object(i.b)("img",{alt:"ipfs-config-edit",src:"http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-config-edit.png"})),Object(i.b)("p",null,"再次启动节点，服务成功启动如下所示："),Object(i.b)("p",null,Object(i.b)("img",{alt:"ipfs-run-successful.",src:"http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-run-successful.png"})),Object(i.b)("h3",{id:"配置cors跨域资源共享"},"配置CORS跨域资源共享"),Object(i.b)("p",null,"为了方便后续前端的开发和数据访问，提前对跨域资源共享",Object(i.b)("inlineCode",{parentName:"p"},"CORS"),"进行配置，",Object(i.b)("inlineCode",{parentName:"p"},"ctrl-c")," 退出",Object(i.b)("inlineCode",{parentName:"p"},"ipfs"),"，然后按照下面的步骤进行跨域配置："),Object(i.b)("pre",null,Object(i.b)("code",a({parentName:"pre"},{}),'ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods \'["PUT", "GET", "POST", "OPTIONS"]\'\n\nipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin \'["*"]\'\n')),Object(i.b)("h3",{id:"验证"},"验证"),Object(i.b)("p",null,"浏览器打开 ",Object(i.b)("a",a({parentName:"p"},{href:"http://localhost:5002/webui"}),"http://localhost:5002/webui")," ，出现Web Console 图形化控制台"),Object(i.b)("p",null,Object(i.b)("img",{alt:"webui-connection",src:"http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/webui-connection.png"})),Object(i.b)("p",null,"这里可以看到所有run在主网上的节点信息，和本地节点相关的配置数据。"))}void 0!==l&&l&&l===Object(l)&&Object.isExtensible(l)&&!l.hasOwnProperty("__filemeta")&&Object.defineProperty(l,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"docs/ipfs/3/ipfs-config.md"}}),l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---docs-ipfs-3-ipfs-config-md-6f221409673a4d86adda.js.map